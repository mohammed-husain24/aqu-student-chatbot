<!doctype html>
<html lang="en" data-theme="light">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Al-Quds University Chatbot</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>

<body>
  <!-- TOPBAR -->
  <header class="topbar">
    <div class="container bar">

      <!-- left: logo + title -->
      <div class="brand">
        <div class="logos">
          <!-- Dark logo (for light theme) -->
          <img class="logo logo-dark" src="{{ url_for('static', filename='images/alquds-logo.png') }}" alt="Al-Quds University Logo">
          <!-- White logo (for dark theme) -->
          <img class="logo logo-light" src="{{ url_for('static', filename='images/alquds-logo-white.png') }}" alt="Al-Quds University Logo White">
        </div>

        <div class="title">
          <div class="uni">Al-Quds University</div>
          <div class="app">Student Assistant</div>
        </div>
      </div>

      <!-- center title (desktop) -->
      <div class="centered-title">
        <div class="uni">Al-Quds University</div>
        <div class="app">Student Assistant</div>
      </div>

      <!-- right: theme toggle -->
      <button id="themeToggle" class="theme-btn" type="button" title="Toggle theme">ðŸŒ“</button>
    </div>
  </header>

  <!-- MAIN -->
  <main class="container main">

    <!-- Quick chips -->
    <div id="quickChips" class="chips">
      <button type="button" data-q="How can I apply for admission?">Admissions</button>
      <button type="button" data-q="Are there scholarships?">Scholarships</button>
      <button type="button" data-q="Tell me about university housing.">Housing</button>
      <button type="button" data-q="List the faculties at Al-Quds University.">Faculties</button>
    </div>

    <!-- Chat -->
    <section id="chat" class="chat">
      {% for turn in history %}
        <div class="row user">
          <div class="avatar user">U</div>
          <div class="bubble user">{{ turn.q }}</div>
        </div>

        <div class="row bot">
          <div class="avatar bot">AQ</div>
          <div class="bubble bot">
            {{ turn.a }}
            {% if turn.sources and turn.sources|length > 0 %}
              <div class="sources">
                Sources:
                {% for s in turn.sources %}
                  <a href="{{ s.href }}" target="_blank" rel="noopener">{{ s.label }}</a>{% if not loop.last %} â€¢ {% endif %}
                {% endfor %}
              </div>
            {% endif %}
          </div>
        </div>
      {% endfor %}
    </section>

    <!-- Input dock (this matches your CSS .dock/.send) -->
    <form id="askForm" method="post" action="/" class="dock">
      <textarea id="q" name="question" rows="1" placeholder="Type your question..."></textarea>
      <button id="sendBtn" type="submit" class="send">Ask</button>
    </form>

    <!-- Reset -->
    <form method="post" action="/reset">
      <button type="submit" class="reset-btn">Reset chat</button>
    </form>

    <!-- Footer (optional, matches your CSS) -->
    <div class="footer">
      <div class="fwrap">
        <div class="fine">Powered by RAG + Groq (optional). Answers are grounded in university sources.</div>
        <div class="fine">Â© Al-Quds University Chatbot</div>
      </div>
    </div>

  </main>

  <script src="{{ url_for('static', filename='app.js') }}"></script>
</body>
</html>
